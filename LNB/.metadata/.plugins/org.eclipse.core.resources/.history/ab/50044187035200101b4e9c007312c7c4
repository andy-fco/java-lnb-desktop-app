package GUI;


import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;

import BLL.Aficionado;
import BLL.Jugador;
import DLL.DLLAficionado;
import DLL.DLLJugador;

import javax.swing.JLabel;
import javax.swing.JOptionPane;

import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class MainMenu extends JFrame {

	private static final long serialVersionUID = 1L;
	private JPanel contentPane;

	/**
	 * Launch the application.
	 */
	
			public void run(Aficionado user) {
				try {
					MainMenu frame = new MainMenu(user);
					frame.setVisible(true);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
	
	/**
	 * Create the frame.
	 */
	public MainMenu(Aficionado user) {
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setBounds(100, 100, 731, 477);
		contentPane = new JPanel();
		setLocationRelativeTo(null);
		contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));

		setContentPane(contentPane);
		contentPane.setLayout(null);
		
		JLabel lblNewLabel = new JLabel("Menú Principal");
		lblNewLabel.setFont(new Font("Tahoma", Font.PLAIN, 38));
		lblNewLabel.setBounds(230, 45, 256, 91);
		contentPane.add(lblNewLabel);
		
		JButton btnForo = new JButton("Foro");
		btnForo.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				System.out.print("Usuario Actual: id_usuario = "+user.getId()+"\nID en la BD: "+DLLAficionado.buscarIdAficionado(user));
			}
		 });
		btnForo.setBounds(40, 304, 156, 36);
		contentPane.add(btnForo);
		
		JButton btnEquipos = new JButton("Equipos");
		btnEquipos.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				Equipos frame = new Equipos(user);
				frame.run(user);
				dispose();
			}
		 });
		btnEquipos.setBounds(206, 304, 156, 36);
		contentPane.add(btnEquipos);
		
		JButton btnJuegos = new JButton("Juegos");
		btnJuegos.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				MenuDeJuegos frame = new MenuDeJuegos(user);
				frame.run(user);
				dispose();
			}
		 });
		btnJuegos.setBounds(373, 304, 156, 36);
		contentPane.add(btnJuegos);
		
		JButton btnJugador = new JButton("Mi Jugador");
		btnJugador.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				if (DLLJugador.buscarJugadorDeAficionado(user) == null) { 
					int crear = JOptionPane.showConfirmDialog(
					        null,
					        "Todavía no creaste tu jugador.\n¿Querés hacerlo ahora?",
					        "Crear Jugador",
					        JOptionPane.YES_NO_OPTION,
					        JOptionPane.QUESTION_MESSAGE
					);
					if (crear == 0) {
						CrearMyPlayer frame = new CrearMyPlayer(user);
						frame.run(user);
						dispose();
					}
				} else {
					//MOSTRAR MYPLAYER
					Jugador jugador = DLLJugador.buscarJugadorDeAficionado(user);
					MyPlayer frame = new MyPlayer(user, jugador);
					frame.run(user, jugador);
					dispose();
					
				}
			}
		 });
		btnJugador.setBounds(539, 304, 156, 36);
		contentPane.add(btnJugador);
		
		JButton btnCerrarSesion = new JButton("Cerrar Sesión");
		btnCerrarSesion.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				int answ = JOptionPane.showOptionDialog(null, "¿Estás segur@ que deseás cerrar sesión?", "Cerrar Sesión", JOptionPane.YES_NO_OPTION, 3, null, null, null);
				if (answ == 0) {
					dispose();
					JOptionPane.showMessageDialog(null, "¡Hasta la próxima, "+user.getNombre()+"!");
				}
			}
		 });
		btnCerrarSesion.setBounds(564, 389, 131, 41);
		contentPane.add(btnCerrarSesion);
		
		JButton btnPerfil = new JButton("Mi Perfil");
		btnPerfil.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				Perfil frame = new Perfil(user);
				frame.run(user);
				dispose();
			}
		});
		btnPerfil.setBounds(610, 10, 85, 36);
		contentPane.add(btnPerfil);
	}
}
